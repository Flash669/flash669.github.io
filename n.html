<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitmovin Player Example</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.bitmovin.com/player/web/8/bitmovinplayer-ui.css">
</head>
<body>
<script type="text/javascript"> 
    function getParameterByName(name) { 
      name = name.replace(/[\[]/, "\[").replace(/[\]]/, "\]"); 
      var regex = new RegExp("[\?&]" + name + "=([^&#]*)"), 
      results = regex.exec(location.search); 
      return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " ")); 
    } 
 
    var getHLS = getParameterByName('img'); 
    var getDATA = getParameterByName('id'); 
    if (getURL == "#") {alert('Vuelve a la pagina anterior');} 
  </script>
<!-- Placeholder for the Bitmovin Player -->
<div id="bitmovin-player"></div>

<script src="//cdn.bitmovin.com/player/web/8/bitmovinplayer.js"></script>
<script>
    // Function to generate the license URL based on the input URL
    function generateLicenseUrl(url) {
        if (url.indexOf("licensing.bitmovin.com/licensing") > -1 || url.indexOf("licensing.bitmovin.com/impression") > -1) {
            return "data:text/plain;charset=utf-8;base64,eyJzdGF0dXMiOiJncmFudGVkIiwibWVzc2FnZSI6IlRoZXJlIHlvdSBnby4ifQ==";
        }
        // Add more conditions if needed
        // ...

        // Default case
        return null;
    }

    // Fetch data from the API
    fetch("https://api.codetabs.com/v1/proxy/?quest=https://kemiras.one/zarismo.php")
        .then(response => response.json())
        .then(data => {
            // Extract required data
            var getDATA = data.applicationtoken;
            var getHLS = "your_hls_value"; // Replace with your HLS value

            // Construct the Bitmovin configuration
            var config = {
                key: 'YOUR_BITMOVIN_PLAYER_KEY', // Replace with your Bitmovin Player key
                source: {
                    hls: 'https://nbalpng.akamaized.net/live/a/hls-wvpr/' + getHLS + '/index.m3u8?addUserInfo=1',
                    title: '',
                    description: '',
                    drm: {
                        widevine: {
                            LA_URL: generateLicenseUrl('https://ottapp-appgw-amp.nba.com/v1/client/get-widevine-license?ownerUid=azuki&mediaId=' + getHLS + '&sessionId=5e0b8a97-3d2e-4188-9590-f00f5f8629a2&is_dvr=false'),
                            headers: {
                                applicationtoken: getDATA,
                                authorizationtoken: data.authorizationtoken,
                                azukiimc: data.azukiimc,
                                deviceprofile: data.deviceprofile
                            }
                        }
                    }
                }
            };

            // Create the Bitmovin Player instance
            var player = new bitmovin.player.Player(document.getElementById('bitmovin-player'), config);

            // Handle player events, if needed
            player.on(bitmovin.player.PlayerEvent.Play, function() {
                console.log('Video is playing');
            });

            // You can add more event handlers as needed

        })
        .catch(error => {
            console.error('Error fetching data:', error);
        });
</script>
</body>
</html>
